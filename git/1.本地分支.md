# 本地分支

## 1.1 创建仓库

```shell
git init
git add
git commit -m " "
```

init把当前文件夹变成一个git仓库
add 把文件添加到暂存区，
commit 把文件存进仓库。

git分为两个步骤，先把修改的文件夹通过add添加到暂存区，再commit提交。

## 1.2 我后悔了，git checkout和git reset

git这么多步骤，走到中间某一步我后悔了怎么办？
首先在不同的步骤后悔，操作都不一样，所以要记好了。

```shell
git checkout -- file #撤销文件修改
git reset HEAD <file> #撤销add
git reset --hard HEAD^ #撤销commit，HEAD^指上一个版本
```

另外为了回退到上一个版本，我们可能需要查看历史和历史命令，命令如下。

```shell
git log
git reflog
```

## 1.3 我删错了

有时候我们需要删除某个文件，我们可以通过下列命令：

```shell
git rm file
git commit -m ""
```

额，我一不小删错了怎么办？？？？

可以通过

```shell
git checkout -- file
```

checkout的本质是用上一次commit的文件替换掉工作区里的。

## 1.4 管理分支

这一部分是大招了啊。这里我们还会用checkout，但是注意没有“--”了。

假设我们的项目完成了一个1.0版本的，保存在版本库中，现在我要开始开发2.0版本了。这个开发过程是漫长的，我不可能完成一小部分就commit一次，这样我们的项目在我们开发2.0版本的时候就黄了。我们只有彻底完成了2.0版本，才会把他保存过去。这个时候就是分支branch的用处了。

我们先通过

```shell
git branch dev #创建dev分支
git checkout dev #转换到dev分支

git checkout -b dev #相当于上面的两条命令
```

创建了一个dev分支，他和原来的master分支是平行的，我们在dev上开发2.0版本，这样别人就可以在master上继续使用1.0版本。

某一天我们的2.0版本完成了，我就可以把dev分支合并到master分支上，通过下列命令完成。

```shell
git merge dev #把dev合并到master
git branch -d dev #记得把dev删除
```
